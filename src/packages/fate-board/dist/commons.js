"use strict";(self.webpackChunkfate_board=self.webpackChunkfate_board||[]).push([[223],{9596:(e,t,l)=>{l.d(t,{L:()=>r});var n=l(32288),o=l(16231),i=l(45250),a=l(73709);const u={class:"f-crumbs"},s=(0,n.pM)({__name:"Crumbs",setup(e){const t=(0,a.Pj)(),l=(0,n.EW)((()=>{const e=[],l=t.state.crumb.crumbs;for(const n of l)e.push({icon:"running"===n.name?o.HomeFilled:void 0,href:n,label:"running"===n.name?"":`${(0,i.capitalize)(n.name)} ${n.name&&n.name===l[l.length-1].name&&n.name.match(/(detail|dashboard)/i)&&t.state.job.jobId?"(Job:"+t.state.job.jobId+")":""}`});return e}));return(e,t)=>{const o=(0,n.g2)("FBreadCrumb");return(0,n.uX)(),(0,n.CE)("section",u,[(0,n.bF)(o,{crumbs:l.value},null,8,["crumbs"])])}}}),r=(0,l(47433).A)(s,[["__scopeId","data-v-565522b4"]])},96977:(e,t,l)=>{l.d(t,{A:()=>k});var n=l(32288),o=l(12416),i=l(51784);const a=(0,n.pM)({__name:"VirtualScrollItem",props:{item:{},active:{type:Boolean},index:{default:void 0},tag:{default:"div"}},setup(e,{expose:t}){const l=(0,n.WQ)("scrollData"),i=(0,n.WQ)("scrollResizeObserver"),a=(0,n.WQ)("undefinedMap"),u=(0,n.WQ)("undefinedSizes"),s=(0,o.KR)(null),r=(0,o.KR)(""),c=(0,o.KR)(""),v=e,d=((0,n.Ht)(),(0,n.EW)((()=>v.item[l.keyField]))),f=(0,n.EW)((()=>l.validSizes[d.value]&&l.sizes[d.value]||0)),m=(0,n.EW)((()=>v.active&&l.active)),p=(0,o.KR)();function g(){var e;m.value?r.value!==d.value&&(r.value=d.value,s.value=null,c.value=null,e=d.value,(0,n.dY)((()=>{d.value===e&&h(p.value.offsetWidth,p.value.offsetHeight),r.value=null}))):s.value=d.value}function h(e,t){const n=Math.round(t);n&&f.value!==n&&(a[d.value]&&(u.value--,a[d.value]=void 0),l.sizes[d.value]=n,l.validSizes[d.value]=!0)}function b(){i&&p.value&&(i.observe(p.value),p.value.addEventListener("resize",y))}function y(e){const{width:t,height:l}=e.detail.contentRect;h(0,l)}return(0,n.wB)((()=>d.value),(()=>{f.value||g()})),(0,n.wB)((()=>m.value),(e=>{f.value||(e?a[d.value]||(u.value=u.value++,a[d.value]=!0):a[d.value]&&(u.value-=1,a[d.value]=!1)),i?e?b():i&&p.value&&(i.unobserve(p.value),p.value.removeEventListener("resize",y)):e&&c.value===d.value&&g()})),(0,n.sV)((()=>{l.active&&(g(),b())})),t({onScrollUpdate:function({force:e}){!m.value&&e&&(c.value=d.value),s.value!==d.value&&!e&&f.value||g()}}),(e,t)=>((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.tag||"div"),{ref_key:"container",ref:p},{default:(0,n.k6)((()=>[(0,n.RG)(e.$slots,"default")])),_:3},512))}}),u=(0,n.pM)({__name:"VirtualScroll",props:{items:{},distance:{default:0},disabled:{type:Boolean,default:!1},minItemSize:{},buffer:{default:200},keyField:{default:"lineNum"},emitScroll:{type:Boolean,default:!1}},emits:["scrollTop","scrollBottom","scroll","afterMounted"],setup(e,{expose:t,emit:l}){let u=0;const s=e,r=l,c=new ResizeObserver((e=>{for(const t of e)if(t.target){const e=new CustomEvent("resize",{detail:{contentRect:t.contentRect}});t.target.dispatchEvent(e)}})),v=(0,o.Kh)({}),d=((0,o.Kh)([]),(0,o.KR)(0)),f=(0,o.KR)(void 0),m=new Map,p=new Map,g=(0,o.KR)(!1);let h,b,y,k,z=0,x=0,R=!1;const _=(0,o.KR)(),S=(0,o.KR)(),w=e=>{if(S.value)for(const t of S.value)t.onScrollUpdate(e)},K=(0,o.Kh)([]),T=(0,o.KR)(!1),I=(0,o.KR)(0),E=(0,o.Kh)({active:!0,sizes:{},validSizes:{},keyField:s.keyField});let F;const B=(0,n.EW)((()=>{const e=[],t=E.sizes;for(let l=0;l<s.items.length;l++){const n=s.items[l],o=n[s.keyField];let i=t[o];void 0!==i||v[o]||(i=0),e.push({item:n,id:o,size:i})}return e})),C=(0,n.EW)((()=>{const e={"-1":{accumulator:0}};let t,l=1e4,n=0;for(let o=0,i=B.value.length;o<i;o++)t=B.value[o].size||s.minItemSize,t<l&&(l=t),n+=t,e[o]={accumulator:n,size:t};return f.value=l,e}));function W(e,t,l,n){const o={item:l,position:0,info:{id:u++,index:t,used:!0,key:n}};return e.push(o),o}function M(e,t=!1){const l=e.info.type;let n=p.get(l);n||(n=[],p.set(l,n)),n.push(e),t||(e.info.used=!1,e.position=-9999,m.delete(e.info.key))}function A(){!function(){const e=L();T.value&&0===e.start&&r("scrollTop"),T.value&&_.value.scrollHeight-e.end==0&&r("scrollBottom"),T.value&&s.emitScroll&&r("scroll",{...e,top:e.start,bottom:_.value.scrollHeight-e.end})}(),g.value||(g.value=!0,requestAnimationFrame((()=>{g.value=!1;const{continuous:e}=H(!1,!0);e||(clearTimeout(h),h=setTimeout(A,100))})))}function H(e,t=!1){const{items:l,keyField:n}=s,o=f.value,i=m,a=p,u=l.length,r=L();if(t){let e=r.start-b||0;if(e<0&&(e=-e),e<o)return{continuous:!0}}b=r.start;const{startIndex:c,endIndex:v}=function(e){let t=0,l=0;const n=s.items.length,o=n-1,i=s.buffer;let a;e.start-=i,e.end+=i;let u,r=0,c=o,v=~~(n/2);do{u=v,a=C.value[v].accumulator,a<e.start?r=v:v<o&&C.value[v+1].accumulator>e.start&&(c=v),v=~~((r+c)/2)}while(v!==u);for(v<0&&(v=0),t=v,l=v;l<o&&C.value[l].accumulator<e.end;l++);return-1===l?l=o:(l++,l>n&&(l=n)),{startIndex:t,endIndex:l}}(r);let d;I.value=C.value[u-1].accumulator;const g=c<=z&&v>=x;if(R!==g){if(g){i.clear(),a.clear();for(let e=0,t=K.length;e<t;e++)d=K[e],M(d)}R=g}else if(g)for(let t=0,o=K.length;t<o;t++)d=K[t],d.info.used&&(e&&(d.info.index=l.findIndex((e=>e[n]===d.item[n]))),(-1===d.info.index||d.info.index<c||d.info.index>=v)&&M(d));const h=g?null:new Map;let k,_,S,w;for(let e=c;e<v;e++){k=l[e];const t=k[n];d=i.get(t),C.value[e].size?(d?(d.info.used=!0,d.item=k):(_=k.type,S=a.get(_),g?S&&S.length?(d=S.pop(),d.item=k,d.info.used=!0,d.info.index=e,d.info.key=t):d=W(K,e,k,t):(w=h&&h.get(_)||0,(!S||w>=S.length)&&(d=W(K,e,k,t),M(d,!0),S=a.get(_)),d=S[w],d.item=k,d.info.used=!0,d.info.index=e,d.info.key=t,h&&h.set(_,w+1),w++),i.set(t,d)),d.position=C.value[e-1].accumulator):d&&M(d)}return x=c,z=v,clearTimeout(y),y=setTimeout(N,300),{continuous:g}}function L(){const e=_.value;return{start:e.scrollTop,end:e.scrollTop+e.clientHeight}}function N(){K.sort(((e,t)=>e.info.index-t.info.index))}function X(e,t){T.value&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height)&&(w&&w({force:!1}),requestAnimationFrame((()=>{H(!1)})))}function $(){T.value&&(H(!1),G())}function j(e){_.value.scrollTop=e}function G(e=!0){e&&(E.validSizes={}),w&&w({force:!0})}return(0,n.wB)((()=>s.items),(()=>G()),{deep:!0}),(0,n.wB)((()=>C.value),(()=>H(!1)),{deep:!0}),(0,n.wB)((()=>B.value),(()=>H(!0)),{deep:!0}),(0,n.sV)((()=>{(0,n.dY)((()=>{H(!0),T.value=!0})),F=new ResizeObserver($),F.observe(_.value)})),(0,n.xo)((()=>{F&&F.disconnect(),c&&c.disconnect()})),(0,n.Gt)("scrollData",E),(0,n.Gt)("scrollResizeObserver",c),(0,n.Gt)("undefinedMap",v),(0,n.Gt)("undefinedSizes",d),t({scrollToBottom:function(){if(k)return;k=!0;const e=_.value;(0,n.dY)((()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame((()=>{e.scrollTop=e.scrollHeight+5e3,0===d.value?k=!1:requestAnimationFrame(t)}))};requestAnimationFrame(t)}))},scrollToItem:function(e){j(e>0?C.value[e-1].accumulator:0)},scrollToPosition:j}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"container",ref:_,class:(0,i.normalizeClass)([{ready:T.value},"scroller"]),onScrollPassive:A,onVisibilitychange:X},[(0,n.Lk)("div",{ref:"wrapper",style:(0,i.normalizeStyle)({minHeight:I.value+"px"}),class:"wrap"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(K,(t=>((0,n.uX)(),(0,n.Wv)(a,{ref_for:!0,ref_key:"items",ref:S,key:t.info.id,item:t.item,index:t.info.index,active:t.info.used,style:(0,i.normalizeStyle)(T.value?{transform:`translateY(${t.position}px)`}:null),class:"item-view"},{default:(0,n.k6)((()=>[(0,n.RG)(e.$slots,"item",{item:t.item,index:t.info.index,active:t.info.used})])),_:2},1032,["item","index","active","style"])))),128))],4)],34))}});var s=l(47433);const r=(0,s.A)(u,[["__scopeId","data-v-69368eb3"]]),c=e=>((0,n.Qi)("data-v-d36a00e2"),e=e(),(0,n.jt)(),e),v={class:"f-log-content"},d={key:0,class:"f-log-tip"},f=[c((()=>(0,n.Lk)("span",null,"loading...",-1)))],m={key:1,class:"f-log-tip"},p=[c((()=>(0,n.Lk)("span",null,"no data",-1)))],g=["id"],h={class:"f-log-item-lineNum"},b={class:"f-log-item-content"},y=(0,n.pM)({__name:"LoggerScroll",props:["logs"],emits:["scroll-top"],setup(e){const t=e,l=(0,o.KR)(0),a=(0,o.KR)();function u(e){return e.item.lineNum}function s(){a.value&&a.value.scrollToBottom()}function c(e){l.value=e.bottom}return(0,n.wB)((()=>t.logs),((e,t)=>{if(e)if(t){if(t.length<e.length){const n=e[0].lineNum,o=t[0].lineNum,i=e[e.length-1].lineNum,u=t[t.length-1].lineNum;let r;if(n<o&&i===u)r=o,function(e){a.value&&a.value.scrollToItem(e)}(e.findIndex((e=>e.lineNum===r)));else if(i>u&&n===o){if(l.value>0)return;s()}}}else s()})),(t,l)=>((0,n.uX)(),(0,n.CE)("div",v,[e.logs?e.logs.length?((0,n.uX)(),(0,n.Wv)((0,o.R1)(r),{key:2,ref_key:"scroller",ref:a,items:e.logs,"min-item-size":20,"emit-scroll":"",class:"f-log-contents",onScrollTop:l[0]||(l[0]=e=>t.$emit("scroll-top")),onScroll:c,onAfterMounted:s},{item:(0,n.k6)((e=>[(0,n.Lk)("div",{id:u(e),class:"f-log-item"},[(0,n.Lk)("article",h,(0,i.toDisplayString)(e.item.lineNum),1),(0,n.Lk)("article",b,(0,i.toDisplayString)(e.item.content),1)],8,g)])),_:1},8,["items"])):((0,n.uX)(),(0,n.CE)("div",m,p)):((0,n.uX)(),(0,n.CE)("div",d,f))]))}}),k=(0,s.A)(y,[["__scopeId","data-v-d36a00e2"]])}}]);